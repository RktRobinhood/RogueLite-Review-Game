:root { --bg:#15151a; --panel:#202028; --gold:#f1c40f; --text:#ecf0f1; --green:#27ae60; --red:#c0392b; --blue:#2980b9; --accent:#9b59b6; }
@font-face { font-family: 'Retro'; src: local('Courier New'), monospace; }

body { margin:0; overflow:hidden; background:var(--bg); font-family:'Segoe UI',Tahoma,sans-serif; color:var(--text); touch-action:none; user-select:none; }

/* LAYOUT UTILS */
.screen { position:absolute; top:0; left:0; width:100%; height:100%; display:flex; flex-direction:column; overflow:hidden; }
.hidden { display:none !important; }
.center { display:flex; align-items:center; justify-content:center; }

/* LOADER */
#loader { background:#000; z-index:9999; }
.loader-bar-box { width:60%; height:10px; border:1px solid var(--green); margin-top:20px; }
.loader-bar { width:0%; height:100%; background:var(--green); transition:width 0.3s; }

/* --- AVATAR (Fixed Visibility) --- */
.avatar-box {
    width: 100px; height: 160px; /* Taller to fit feet */
    position: relative; margin: 10px auto; 
    /* overflow: visible; IMPORTANT: Lets items stick out */
}
.base-part { position: absolute; background: #555; border-radius: 4px; left: 50%; transform: translateX(-50%); }
.base-head { top: 10px; width: 40px; height: 40px; display: flex; justify-content: center; align-items: center; font-size: 30px; z-index: 5; }
.base-torso { top: 55px; width: 36px; height: 50px; z-index: 4; border-radius: 6px; }
.base-legs  { top: 100px; width: 30px; height: 40px; z-index: 3; background: #444; }

.layer { position: absolute; left: 50%; transform: translateX(-50%); display:flex; justify-content:center; align-items:center; pointer-events: none;}
/* Equipment Positioning */
.l-head { top: -15px; z-index: 20; font-size: 40px; width: 80px; text-align: center; } 
.l-body { top: 55px; z-index: 15; font-size: 38px; } 
.l-feet { top: 100px; z-index: 16; font-size: 30px; } 
.l-main { top: 60px; left: 80px; z-index: 25; font-size: 28px; transform: rotate(-15deg); } 
.l-off  { top: 60px; left: 20px; z-index: 24; font-size: 28px; }

/* --- MENU LAYOUT --- */
.menu-header { text-align: center; padding: 10px; background: rgba(0,0,0,0.2); }
.menu-stats { display:flex; justify-content:center; gap:20px; color: #aaa; font-size: 0.9rem; }
.gold-display { color: var(--gold); font-weight: bold; font-size: 1.2rem; }

.menu-content { flex-grow: 1; display: flex; flex-direction: column; overflow: hidden; position: relative; }

/* SHOP TABS */
.shop-nav { display:flex; width:100%; background:#111; border-bottom:1px solid #333; }
.nav-btn { flex:1; background:transparent; border:none; color:#666; padding:15px 0; font-weight:bold; cursor:pointer; transition:0.2s; border-bottom:3px solid transparent; }
.nav-btn.active { color:white; border-bottom-color:var(--accent); background:rgba(255,255,255,0.05); }

.shop-container { flex-grow:1; overflow-y:auto; padding:10px; background: rgba(0,0,0,0.2); }
.shop-grid { display:grid; grid-template-columns:1fr 1fr; gap:8px; padding-bottom:80px; /* Space for play button */ }

.shop-item { background:var(--panel); padding:10px; border-radius:8px; border:1px solid #444; display:flex; flex-direction:column; align-items:center; text-align:center; }
.shop-item h3 { margin: 5px 0; font-size: 0.9rem; color: #ddd; }
.shop-item p { margin: 0 0 5px 0; font-size: 0.75rem; color: #888; }

.buy-btn { background:var(--green); color:white; border:none; padding:8px; width:100%; border-radius:4px; cursor:pointer; font-weight: bold; margin-top: auto; }
.buy-btn:disabled { background:#333; color:#555; }

/* START BUTTON (Sticky Bottom) */
.play-bar { position: absolute; bottom: 0; left: 0; width: 100%; padding: 15px; box-sizing: border-box; background: linear-gradient(to top, #000, transparent); pointer-events: none; }
.start-btn { pointer-events: auto; width: 100%; padding: 15px; font-size: 1.5rem; background: var(--gold); border: none; border-radius: 50px; font-weight: bold; color: #000; box-shadow: 0 5px 20px rgba(241,196,15,0.4); cursor: pointer; transition: transform 0.1s; }
.start-btn:active { transform: scale(0.98); }

/* GAME UI */
#gameHUD { height:90px; display:flex; justify-content:space-between; align-items:flex-start; padding:10px 20px; background:rgba(0,0,0,0.4); }
.powerup-bar { display: flex; gap: 15px; margin-top: 5px; }
.p-btn { width: 45px; height: 45px; border-radius: 50%; border: 2px solid #555; background: #333; color: white; font-size: 20px; cursor: pointer; position: relative; display: flex; justify-content: center; align-items: center; }
.p-count { position: absolute; top: -5px; right: -5px; background: var(--red); font-size: 10px; width: 18px; height: 18px; border-radius: 50%; display: flex; justify-content: center; align-items: center; border: 1px solid white; }
.p-btn.disabled { opacity: 0.3; pointer-events: none; filter: grayscale(1); }

#qArea { flex-grow:1; display:flex; flex-direction:column; justify-content:center; align-items:center; padding:20px; overflow-y:auto; }
#qText { font-size:1.3rem; text-align:center; margin-bottom:20px; width:100%; max-width:800px; }
#preambleBox { background:rgba(255,255,255,0.05); border-left:4px solid var(--accent); padding:15px; margin-bottom:15px; border-radius:4px; width:100%; max-width:600px; text-align:left; display:none; }

#inputContainer { height:35%; background:var(--panel); display:flex; flex-direction:column; padding:10px; box-sizing: border-box;}
.choice-grid { display:grid; grid-template-columns:1fr 1fr; gap:10px; height:100%; }
.ans-btn { background:#34495e; color:white; border:none; border-radius:8px; font-size:1.1rem; cursor:pointer; transition:0.2s; }

.gear-icon { position:absolute; top:15px; right:15px; font-size:24px; cursor:pointer; z-index:100; }
.upgrade-dots { display:flex; gap:3px; margin:5px 0; }
.dot { width:6px; height:6px; background:#333; border-radius:50%; }
.dot.active { background:var(--gold); }